"use strict";var _createClass=function(){function a(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&a(e.prototype,r),n&&a(e,n),e}}();function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(function(){jQuery(document).ready(function(a){return window.WC_Authorize_Net_Accept_Hosted_Handler=function(){function n(e){var r=this;_classCallCheck(this,n),this.process_transaction=this.process_transaction.bind(this),this.params=e,this.token_form=a("#wc-"+this.params.id_dasherized+"-send-token"),this.iframe=a("#wc-"+this.params.id_dasherized+"-iframe"),this.block_ui(),this.token_form.submit(),this.iframe.load(function(){return r.token_form.remove(),r.iframe.show(),a("html, body").animate({scrollTop:r.iframe.offset().top},1e3),r.unblock_ui()})}return _createClass(n,[{key:"handle_iframe_response",value:function(e,r){var n,a;if(r===this.params.form_url&&(a=e,null!=(n=this.parse_query(e)).action))switch(n.action){case"resizeWindow":if(null!=n.height)return this.resize_frame(n.height);break;case"cancel":return this.cancel_transaction();case"transactResponse":return this.process_transaction(a)}}},{key:"parse_query",value:function(e){var r,n,a,t,i,o;for(o={},n=a=0,i=(r=e.split("&")).length;0<=i?a<i:i<a;n=0<=i?++a:--a)o[(t=r[n].split("="))[0]]=unescape(t[1]);return o}},{key:"process_transaction",value:function(e){var t,r,i=this;return this.block_ui(),r=e.split("response=").pop(),(t=JSON.parse(r)).nonce=this.params.response_nonce,t.order_id=this.params.order_id,a.ajax({type:"POST",url:this.params.response_url,data:t}).done(function(e){var r,n;return"2"===(n=t.responseCode)||"3"===n?i.handle_error():(r=null!=e.data&&e.data.redirect_url?e.data.redirect_url:i.params.order_received_url,window.location=r)}).fail(function(e,r,n){var a;return"2"===(a=t.responseCode)||"3"===a?i.handle_error():window.location=i.params.order_received_url})}},{key:"cancel_transaction",value:function(){return this.block_ui(),window.location=this.params.order_pay_url}},{key:"resize_frame",value:function(e){return this.iframe.height(e)}},{key:"handle_error",value:function(){return window.location=this.params.order_pay_url}},{key:"block_ui",value:function(){return a("body").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}},{key:"unblock_ui",value:function(){return a("body").unblock()}}]),n}()})}).call(void 0);