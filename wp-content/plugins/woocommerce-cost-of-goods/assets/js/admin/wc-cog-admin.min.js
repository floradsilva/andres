"use strict";(function(){jQuery(function(r){var _;return _=function(s){var o,t,e;return 0===r("p.applying-costs-result .progress").length&&r("p.applying-costs-result").append(' <span class="progress"></span>'),t='<span class="error"   style="color: #DC3232;">&#10005;</span> '+wc_cog_admin.i18n.apply_costs_error,e='<span class="success" style="color: #008000;">&#10004;</span> '+wc_cog_admin.i18n.apply_costs_success,o={action:"wc_cog_get_applying_costs_status",security:wc_cog_admin.get_applying_cost_of_goods_status_nonce,job_id:s},r.post(ajaxurl,o).done(function(s){if(s.success){if("completed"!==s.data.status)return r("p.applying-costs-result .progress").html(s.data.finished+" / "+s.data.total),setTimeout(_(s.data.id),1e5);r("p.applying-costs-result").html(e)}else r("p.applying-costs-result").html(t),console.log(s.data);return r("span.applying-costs-progress").removeClass("is-active"),r("#wc_cog_apply_costs_to_previous_orders").prop("disabled",!1)}).fail(function(){return r("p.applying-costs-result").html(t),r("span.applying-costs-progress").removeClass("is-active"),r("#wc_cog_apply_costs_to_previous_orders").prop("disabled",!1)})},wc_cog_admin.existing_background_job_id&&_(wc_cog_admin.existing_background_job_id),r("button#wc_cog_apply_costs_to_previous_orders").on("click",function(s){var o,t,e,a,c,i,n=this;return s.preventDefault(),a="all-orders"===r("input[name=wc_cog_apply_costs_previous_orders]:checked").val()?wc_cog_admin.i18n.apply_costs_confirm_message_all:wc_cog_admin.i18n.apply_costs_confirm_message,!!confirm(a)&&(o=r(this).closest("fieldset"),t=o.find("span.applying-costs-progress"),e=o.find("> p"),r(this).prop("disabled",!0),t.addClass("is-active"),e.addClass("applying-costs-result").html(wc_cog_admin.i18n.apply_costs_in_progress+"<br/>"+wc_cog_admin.i18n.apply_costs_notice),i='<span class="error" style="color: #DC3232;">&#10005;</span> '+wc_cog_admin.i18n.apply_costs_error,c={action:"wc_cog_apply_costs_to_previous_orders",security:wc_cog_admin.apply_cost_of_goods_nonce,previous_orders:r("input[name=wc_cog_apply_costs_previous_orders]:checked").val()},r.post(ajaxurl,c).done(function(s){return s.success?null!=s.data.id?setTimeout(_(s.data.id),1e5):void 0:(e.html(i),t.removeClass("is-active"),r(n).prop("disabled",!1))}).fail(function(){return r(n).prop("disabled",!1),t.removeClass("is-active"),e.html(i)}))}),r("select#field_to_edit").on("variable_cost_of_good_ajax_data",function(){return{value:window.prompt(woocommerce_admin_meta_boxes_variations.i18n_enter_a_value)}}),r("#the-list").on("click",".editinline",function(s){var o,t;return t=(t=r(this).closest("tr").attr("id")).replace("post-",""),o=r("#wc_cog_inline_"+t).find(".cost").text(),r('input[name="_wc_cog_cost"]').val(o)}),r("#woocommerce-order-items").on("change","input.quantity",function(s){var o,t,e,a,c,i;return s.preventDefault(),c=r(this).closest("tr.item"),a=r(this).val(),e=r(this).attr("data-qty"),t=r("input.cog-total",c),o=r("input.cog-suggestion",c),i=accounting.unformat(t.attr("data-cog-total"),"."),i/=e,o.val(accounting.formatNumber(i*a,woocommerce_admin_meta_boxes.currency_format_num_decimals,"",woocommerce_admin_meta_boxes.currency_format_decimal_sep).toString())})})}).call(void 0);